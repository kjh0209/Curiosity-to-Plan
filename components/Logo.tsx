"use client";

import Link from "next/link";

interface LogoProps {
  size?: "sm" | "md" | "lg";
  showText?: boolean;
  href?: string;
  className?: string;
}

const sizeConfig = {
  sm: { height: 32, gap: "gap-2" },
  md: { height: 40, gap: "gap-2.5" },
  lg: { height: 48, gap: "gap-3" },
};

function LogoSVG({ height, showText }: { height: number; showText: boolean }) {
  // Original is 680x140.
  // Icon only is 140x140 (approx).
  // Aspect ratio full: 4.85
  // Aspect ratio icon: 1

  const viewBox = showText ? "0 0 680 140" : "0 0 140 140";
  const width = showText ? height * (680 / 140) : height;

  return (
    <svg
      width={width}
      height={height}
      viewBox={viewBox}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="flex-shrink-0"
    >
      <defs>
        <linearGradient id="bg_sl" x1="18" y1="18" x2="122" y2="122" gradientUnits="userSpaceOnUse">
          <stop offset="0" stopColor="#0B1026" />
          <stop offset="0.55" stopColor="#12163A" />
          <stop offset="1" stopColor="#0A0F22" />
        </linearGradient>
        <linearGradient id="stair_sl" x1="34" y1="98" x2="112" y2="44" gradientUnits="userSpaceOnUse">
          <stop offset="0" stopColor="#22D3EE" />
          <stop offset="0.55" stopColor="#60A5FA" />
          <stop offset="1" stopColor="#A78BFA" />
        </linearGradient>
        <filter id="shadow_sl" x="-0.08974359" y="-0.12962963" width="1.1794872" height="1.2592593" colorInterpolationFilters="sRGB">
          <feDropShadow dx="0" dy="6" stdDeviation="6" floodColor="#000000" floodOpacity="0.32" />
        </filter>
      </defs>

      {/* Icon Group */}
      <g>
        <path d="m 40,12 h 60 c 15.512,0 28,12.488 28,28 v 60 c 0,15.512 -12.488,28 -28,28 H 40 C 24.488,128 12,115.512 12,100 V 40 C 12,24.488 24.488,12 40,12 Z" fill="url(#bg_sl)" />
        <g filter="url(#shadow_sl)">
          <path d="M34 98 H60 V78 H80 V60 H100 V44 H112" stroke="url(#stair_sl)" strokeWidth="14" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M34 98 H60 V78 H80 V60 H100 V44 H112" stroke="#FFFFFF" strokeOpacity="0.20" strokeWidth="6" strokeLinecap="round" strokeLinejoin="round" />
        </g>
      </g>

      {/* Wordmark Group - Only render if showText is true to avoid hidden overflow issues if container is small */}
      {showText && (
        <g style={{ fontWeight: 700, fontSize: "56px", fontFamily: "Comfortaa", letterSpacing: "-0.6px", fill: "currentColor" }}>
          {/* The SVG paths for text provided by user. 
                Note: Inlining paths is safe. 
                Using currentColor allow adaptivity if needed, though original had fill="#0b0b0b". 
                We can stick to original or use CSS classes. 
                Let's use the paths from the provided file.
            */}
          <path d="m 179.488,90.56 q -5.432,0 -9.912,-2.464 -4.424,-2.464 -6.104,-6.44 -0.28,-0.672 -0.28,-1.12 0,-0.84 0.616,-1.456 0.616,-0.672 1.68,-0.896 0.168,-0.056 0.56,-0.056 0.896,0 1.68,0.56 0.84,0.504 1.232,1.4 1.008,2.184 3.976,3.696 2.968,1.512 6.552,1.512 4.2,0 7.112,-1.904 2.912,-1.96 2.912,-5.32 0,-3.192 -2.464,-5.432 -2.464,-2.296 -7.504,-2.8 -6.944,-0.672 -10.92,-4.032 -3.976,-3.416 -3.976,-8.512 0,-3.584 2.016,-6.16 2.072,-2.632 5.6,-3.976 3.584,-1.4 8.008,-1.4 4.816,0 8.12,1.96 3.304,1.96 5.6,5.6 0.672,1.064 0.672,2.016 0,1.232 -1.12,2.016 -0.616,0.392 -1.456,0.392 -0.84,0 -1.568,-0.392 -0.728,-0.448 -1.12,-1.176 -1.512,-2.52 -3.808,-3.808 -2.24,-1.344 -5.712,-1.344 -4.256,0 -6.888,1.68 -2.632,1.624 -2.632,4.76 0,2.912 2.352,4.872 2.352,1.96 8.4,2.576 6.72,0.672 10.416,4.088 3.696,3.36 3.696,8.904 0,4.032 -2.184,6.944 -2.184,2.856 -5.824,4.312 -3.584,1.4 -7.728,1.4 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 226.09599,85.968 q 0.616,0.672 0.616,1.68 0,1.232 -1.008,2.072 -0.84,0.672 -1.792,0.672 -1.232,0 -2.016,-1.008 l -10.64,-13.16 -2.8,2.464 v 8.568 q 0,1.232 -0.784,2.016 -0.728,0.728 -1.96,0.728 -1.232,0 -2.016,-0.728 -0.728,-0.784 -0.728,-2.016 V 49.008 q 0,-1.232 0.728,-1.96 0.784,-0.784 2.016,-0.784 1.232,0 1.96,0.784 0.784,0.728 0.784,1.96 V 71.8 l 13.608,-12.152 q 0.728,-0.728 1.736,-0.728 1.176,0 1.904,0.896 0.728,0.728 0.728,1.736 0,1.176 -0.896,1.904 l -10.304,9.184 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 237.648,90 q -1.232,0 -2.072,-0.784 -0.784,-0.84 -0.784,-2.072 v -24.92 q 0,-1.288 0.784,-2.072 0.84,-0.784 2.072,-0.784 1.288,0 2.072,0.784 0.784,0.784 0.784,2.072 v 24.92 q 0,1.232 -0.784,2.072 Q 238.936,90 237.648,90 Z m 0,-35.616 q -1.512,0 -2.632,-1.064 -1.064,-1.12 -1.064,-2.632 0,-1.512 1.064,-2.576 1.12,-1.12 2.632,-1.12 1.512,0 2.576,1.12 1.12,1.064 1.12,2.576 0,1.512 -1.12,2.632 -1.064,1.064 -2.576,1.064 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 257.824,90 q -2.408,0 -4.368,-1.288 -1.904,-1.344 -2.968,-3.696 -1.064,-2.408 -1.064,-5.376 V 49.064 q 0,-1.232 0.784,-2.016 0.784,-0.784 2.016,-0.784 1.232,0 2.016,0.784 0.784,0.784 0.784,2.016 V 79.64 q 0,2.072 0.784,3.416 0.784,1.344 2.016,1.344 h 1.4 q 1.12,0 1.792,0.784 0.728,0.784 0.728,2.016 0,1.232 -1.064,2.016 Q 259.616,90 257.936,90 Z" className="fill-gray-900 dark:fill-white" />
          <path d="m 274.02396,90 q -2.408,0 -4.368,-1.288 -1.904,-1.344 -2.968,-3.696 -1.064,-2.408 -1.064,-5.376 V 49.064 q 0,-1.232 0.784,-2.016 0.784,-0.784 2.016,-0.784 1.232,0 2.016,0.784 0.784,0.784 0.784,2.016 V 79.64 q 0,2.072 0.784,3.416 0.784,1.344 2.016,1.344 h 1.4 q 1.12,0 1.792,0.784 0.728,0.784 0.728,2.016 0,1.232 -1.064,2.016 -1.064,0.784 -2.744,0.784 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 286.35992,90 q -1.232,0 -2.072,-0.84 -0.784,-0.84 -0.784,-2.072 V 49.176 q 0,-1.232 0.84,-2.072 0.84,-0.84 2.016,-0.84 1.232,0 2.072,0.84 0.84,0.84 0.84,2.072 v 35 h 20.272 q 1.232,0 2.072,0.84 0.84,0.84 0.84,2.072 0,1.232 -0.84,2.072 -0.84,0.84 -2.072,0.84 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 332.18392,90.224 q -4.48,0 -8.008,-1.96 -3.528,-2.016 -5.488,-5.544 -1.96,-3.528 -1.96,-8.008 0,-4.536 1.96,-8.064 1.96,-3.528 5.488,-5.488 3.528,-2.016 8.008,-2.016 4.424,0 7.896,2.016 3.528,1.96 5.488,5.488 2.016,3.528 2.016,8.064 0,4.48 -1.96,8.008 -1.96,3.528 -5.488,5.544 -3.472,1.96 -7.952,1.96 z m 0,-5.04 q 2.856,0 5.096,-1.344 2.296,-1.344 3.528,-3.696 1.288,-2.408 1.288,-5.432 0,-3.024 -1.288,-5.432 -1.232,-2.408 -3.528,-3.752 -2.24,-1.344 -5.096,-1.344 -2.856,0 -5.152,1.344 -2.24,1.344 -3.528,3.752 -1.288,2.408 -1.288,5.432 0,3.024 1.288,5.432 1.288,2.352 3.528,3.696 2.296,1.344 5.152,1.344 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 369.38389,90.224 q -4.48,0 -8.008,-1.96 -3.528,-2.016 -5.488,-5.544 -1.96,-3.528 -1.96,-8.008 0,-4.536 1.96,-8.064 1.96,-3.528 5.488,-5.488 3.528,-2.016 8.008,-2.016 4.424,0 7.896,2.016 3.528,1.96 5.488,5.488 2.016,3.528 2.016,8.064 0,4.48 -1.96,8.008 -1.96,3.528 -5.488,5.544 -3.472,1.96 -7.952,1.96 z m 0,-5.04 q 2.856,0 5.096,-1.344 2.296,-1.344 3.528,-3.696 1.288,-2.408 1.288,-5.432 0,-3.024 -1.288,-5.432 -1.232,-2.408 -3.528,-3.752 -2.24,-1.344 -5.096,-1.344 -2.856,0 -5.152,1.344 -2.24,1.344 -3.528,3.752 -1.288,2.408 -1.288,5.432 0,3.024 1.288,5.432 1.288,2.352 3.528,3.696 2.296,1.344 5.152,1.344 z" className="fill-gray-900 dark:fill-white" />
          <path d="m 408.09584,59.144 q 4.312,0 7.84,2.072 3.584,2.016 5.6,5.6 2.016,3.528 2.016,7.896 0,4.368 -1.904,7.952 -1.848,3.528 -5.152,5.544 -3.248,2.016 -7.28,2.016 -3.248,0 -6.048,-1.344 -2.8,-1.344 -4.76,-3.752 v 15.12 q 0,1.288 -0.784,2.072 -0.784,0.784 -2.072,0.784 -1.232,0 -2.072,-0.784 -0.784,-0.784 -0.784,-2.072 V 74.712 q 0,-4.368 2.016,-7.896 2.072,-3.584 5.544,-5.6 3.528,-2.072 7.84,-2.072 z m 0,26.04 q 2.8,0 5.04,-1.344 2.296,-1.4 3.584,-3.752 1.344,-2.408 1.344,-5.376 0,-2.968 -1.344,-5.376 -1.288,-2.408 -3.584,-3.752 -2.24,-1.4 -5.04,-1.4 -2.8,0 -5.096,1.4 -2.24,1.344 -3.528,3.752 -1.288,2.408 -1.288,5.376 0,2.968 1.288,5.376 1.288,2.352 3.528,3.752 2.296,1.344 5.096,1.344 z" className="fill-gray-900 dark:fill-white" />
        </g>
      )}
    </svg>
  );
}

// Export a wrapper that maintains the interface but uses the new SVG
export function LogoIcon({ size = 40 }: { size?: number }) {
  // Map size to height roughly
  return <LogoSVG height={size} showText={false} />;
}

export default function Logo({
  size = "md",
  showText = true,
  href = "/",
  className = ""
}: LogoProps) {
  const config = sizeConfig[size];

  const content = (
    <div className={`flex items-center ${config.gap} ${className}`}>
      <LogoSVG height={config.height} showText={showText} />
    </div>
  );

  if (href) {
    return (
      <Link href={href} className="inline-flex hover:opacity-80 transition-opacity">
        {content}
      </Link>
    );
  }

  return content;
}

